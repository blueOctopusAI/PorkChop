{% extends "base.html" %}

{% block content %}
<section class="hero">
    <h1>PorkChop</h1>
    <p class="tagline">AI that reads the bills so you don't have to.</p>
    <div class="stat-cards">
        <div class="stat-card">
            <span class="stat-number">{{ stats.bills_analyzed }}</span>
            <span class="stat-label">Bills Analyzed</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{{ stats.spending_items }}</span>
            <span class="stat-label">Spending Items</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">${{ "{:,.0f}".format(stats.total_spending) }}</span>
            <span class="stat-label">Total Spending Tracked</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{{ stats.items_scored }}</span>
            <span class="stat-label">Items Pork-Scored</span>
        </div>
    </div>
</section>

<section class="bills-list">
    <h2>Analyzed Bills</h2>
    {% if bills %}
    <table>
        <thead>
            <tr>
                <th>Bill</th>
                <th>Title</th>
                <th>Congress</th>
                <th>Status</th>
                <th>Fetched</th>
            </tr>
        </thead>
        <tbody>
            {% for bill in bills %}
            <tr>
                <td><a href="/bill/{{ bill.id }}">{{ bill.bill_type | upper }} {{ bill.bill_number }}</a></td>
                <td>{{ (bill.title or 'Untitled')[:80] }}{% if (bill.title or '')|length > 80 %}...{% endif %}</td>
                <td>{{ bill.congress }}th</td>
                <td>{{ bill.status[:50] if bill.status else '-' }}</td>
                <td>{{ bill.fetched_at[:10] if bill.fetched_at else '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <p>No bills analyzed yet.</p>
        <p>Use the CLI to get started:</p>
        <pre>porkchop fetch HR-10515 --text
porkchop process code/raw_input.txt --bill-id HR-10515</pre>
    </div>
    {% endif %}
</section>
{% endblock %}
